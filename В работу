 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 ПРИ РАСЧЕТЕ ПОЛИГРАФИИ ПРИБАВЛЯЕТСЯ ЦЕНА ТИРАЖА
 вьюха расчитывает цену в функции модели. там расчет на основе цены и тиража. Где то там искать проблему надо.
 
 19-08-2023

    x прочекать базу (не все корректно названа и не все есть)

    - Картники нейросеть (рисунок с акварелью)
 
    - Загрузка файлов
        
    - Описание сверху - collapse - 
        - Полиграфия - визитки (про тираж, материалы и технологию) слева картинка col-3 справа текст. при мобильном - картнка не показывается
        - Широкоформатка (Про размеры, обработку и технологию) слева картинка col-3 справа текст. при мобильном - картнка не показывается

    - Статьи снизу (для СЕО статья небольшая, со ссылками на другие услуги)
        - Страница шаблон письма (в html попробовать) https://selenium-python.com/smtplib-email-example https://docs.python.org/3.8/library/email.examples.html

    - В буклетах указать про биговку
        - "Сложение листа по прямолинейной бороздке, предотвращающей заламывание бумаги"

    Проработать:
        - Отправка в бота в телегу (из докера)        
        - Админка
        - Доставка
        - Оплата страница
        - Бэкап базы
        
        x Метаданные блоками или переменными/тегами

    Баги:
        x 150х70 - формата в базе нет!
    ------------------------------------------------------------------------------------------------
    ------------------------------------------------------------------------------------------------
    ------------------------------------------------------------------------------------------------


        Перенести на новый сервер evak24-7.ru и старый tipkor.ru
            x For it I need create .conf in nginx/site-avialible and simlink to nginx/site-enable
            x Copy dir with index.html file to path in .conf
            x Change DNS note in reg.ru
            x Get SSL sert from sslbot. and check redirect in .conf files nginx.

        Prepare for deploy new tipkor.ru site
            x Copy from sokolol/deploy
            - Change correct values
            - Put simlink from /deploy to nginx/site-enable
        
3-08-23 Доделываем печати
        x доделать еще штампы.
        - расставить блок пояснений сверху
        - сделать разворачивающийся блок с пояснениями и картинками
        x блок к заказу сделать (отдельно клиентские данные, отдельно файл и коммент)
        - разбор джейсона в продукции в Ордерах
        - админку настроить

        - снизу статьи для каждого вида продукции
------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------

Задачи:

    Баги:
        x В форме надо привязанный жесто ИД брать для типов оснасток snap_type (int val not str(norm/auto))
        x Расчет времени в полиграфии ??
        
    Модели: 
        x ограничения полей
        x on_delete
        x blank
        - Загрузка файлов


    View:

    Forms:
        x Валидация полей формы (https://django.fun/ru/docs/django/4.1/ref/forms/validation/)
    
    Utils:
        х Расчет Широкоформатки 

        x разбор джейсона в продукции в Отправщике

        х Дата время заказа и готовноть ()
            x Полиграфия 
            x Широкоформатка
            x Печати
        x Формат даты DATEITME

        x дата готовности исоходя из времени заказа 
            x для полиграфии 15-00 (Если будет согласовано до 15-00)
            x Для Широкоформатки подумать

    UI:
        x Блок калькулятора
        x Блок расчета
        x Блок контактов
        - Описание сверху - collapse - 
            - Полиграфия - визитки (про тираж, материалы и технологию) слева картинка col-3 справа текст. при мобильном - картнка не показывается
            - Широкоформатка (Про размеры, обработку и технологию) слева картинка col-3 справа текст. при мобильном - картнка не показывается
            x Печати - виды оснасток (карточки оснасток с описанием) Возможно справа текст какой нибудь. В мобильном паддинг вертикальный
        x Картинки для страниц с калькуляторами (на белом фоне просто на тему)
        - Статьи снизу (для СЕО статья небольшая, со ссылками на другие услуги)
        - Страница шаблон письма (в html попробовать) https://selenium-python.com/smtplib-email-example https://docs.python.org/3.8/library/email.examples.html
        x Подвал (прилипить снизу, продублировать ссылки услуг. Информация для безнала, доставка, контакты (схема проезда))
        x Главная
            x Карточки на главной (сделать аккуратнее, доработкать, что бы пусто не было)
            x Снизу карта
        х Якоря (При переходе, что бы на целевое место смещался фокус)
        x Мобильная версия (проверить по медиа запросам, как отображается. Важно, с сервера - на телефоне)
            х Контатные поля торчат (сделать через другой виджет, через div вроде бы. Посмотреть в comment field form)
            х Якоря (При переходе, что бы на целевое место смещался фокус)
            x шапка в мобильной версии.
        - В буклетах указать про биговку
            - "Сложение листа по прямолинейной бороздке, предотвращающей заламывание бумаги"
        x Округление сумм до десятков рублей

    Проработать:
        - Отправка в бота в телегу (из докера)        
        - Админка
        - Доставка
        x Контакты страница - добавить после графика работы (в мобильной остается)
        - Оплата страница
        - Бэкап базы

    Деплой:
        x gunicorn
        x nginx
        x ssl

    CEO
        x robot.txt
        x sitemap
        - Метаданные блоками или переменными/тегами
        

----------------------------------------------------------------------------




; 15-06
При связанной форме добавляем в контекст форму (как?) для комментария к заказу, контактов (тел, почта) и закгрузки макетов.
    для этого:
        - в модели ОРДЕР поля под макет, коммент и связанное к новой модели КЛИЕНТ
        - создать модель КЛИЕНТ, поля: телефон, почта, имя. Обязательно или почта или телефон.
        - КЛИЕНТ к ОРДЕР - один ко многим

; 16-06 Сделать 2 формы с сохранением не получилось. Объект каждый раз создается новый, костылями передавать не будет правильным решением.
В итоге делаем стандартный заказ. (расчет - подтверждение и добавление инфы - успех(с описанием))
    - расчет есть, но нужно добавить кнопку "сделать заказ" по которой переход "get /confirm?id=0000" на страницу подтверждения

    - страница подтверждения
        - еще раз про заказ
        - форма с полями (комментария к заказу, контактов (тел, почта) и закгрузки макетов)
        - кнопка "вернутся к расчету" ведет назад 
        - кнопка "заказать" которая ведет на страницу "успеха"  "get confirm/success?id=0000"

    - страница успеха
        - инфа по заказу с номером и пояснениями


        Прояснить про get_context и https://djangodoc.ru/3.1/topics/class-based-views/generic-display/

17-06 Оказалось что лучше сразу базу продумать.
    - Модель заказов - продумать (путь это будет большая модель для расчета и заказов)
        - если заказа нет или одно из полей отсутсвует - то только расчет
        - если (возможно надо сделать поле заказано или нет)
        - Первый проход только заказ и цена. После подтверждения поля дозаполняются
    - Клиентов надо сделать обязательно

Путь заказа такой: расчет в ордер -- конфирм - этот же ордер, и заполняем клиентские поля и к заказу --- заказ создан (даты, инфа по заказу, клиентские данные)
    - Потом письмо или сообщение клиенту и инфой по заказу и доп информацией. Или звонок.

21-06 Полный рефактор базы данных.
    https://drive.google.com/file/d/11dyT5EPSD7W7FFkiqwoHN_GtF55qsZZG/view?usp=sharing
    схема выше по ссылке

    в новой ветке накидываем новую базу.

22-06 Получилось развернуть новую базу. 

    теперь надо.
        - перенести создание заказа в order.models
            - функцию в которой создается клиент, и заказ
            - отсюда же отправка на почту заказа или еще куда нибудь
        - Номальный вид представления заказа (заказ на то то и то то, готовность на тогда то.)
        - Страница успешного создания заказа.


26-06 пробная отправка заказа  
    - телефон - платно, после запуска будем пробовать
    - емейл - есть
    - мессенджеры - телега через бота, вотцап жесть с бизнес апи




28-06 Широкоформатка 
        - модель расчета (размеры инты, материал - ссылка на модель материалов, постобработка - константа, цена - результат расчета)
        - модуль расчета (по каждому виду функция исходя из размеров и материала, который пришел и постобработки (если есть))


19-07 Широкоформатка

        - Подправляем шаблоны, что бы все страницы корректно открывались
        - Делаем заказ на каждую позицию (надо материалы заполнить!)
        
        - Буклеты доделать
                - Добавляем лифлеты - по нормальной сохранением
                - Буклеты - 3 вида из А4 (буклет, книжка, гаромшка)
                - формат из базы
                - пост обработку 3 вида - это константа.

        - Надо заполнять базу форматами!!!    

                - Научиться файлом постгресс заполнять и записать это в Блокнот

27-07-23 Печати и штампы

        - Виды печатей: круглые, штампы и факсимиле
        - Для каждого вида оснастки: 
            - для круглых: автомат, обычная, и карманная
            - для штампов...: автомат или обычная.

        - Размеры: Круглая просто пока диаметр 40мм
                    - Для штампов: выбрать из стандартных (радиокнопки) или указать свой.

            У штампов исходя из размеров должен быть подбор оснасток (видимо, по большей стороне просто смотреть)

        Цикл заказа: Печать - оснастка(тип) - количество. Подсчет печать+оснастка+количество, указать дату и время готовности.
                    Штамп - размер (свой или из стандартных) - количество. Подсчет штамп+оснастка,найденная по размеру+количество, указать дату и время готовности.

        - Так же в оснастки нужны картинки.

        Таблица оснасток: id, form, size_x, size_y, price
        Таблица печати: id, form, x, y, count, snap(fk - snap_table)

-----------------------------------------



